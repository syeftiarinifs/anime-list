{"ast":null,"code":"import _slicedToArray from\"/Users/syeftiarini.sutendi/anime-list-2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useEffect,useState}from\"react\";import Pagination from'@mui/material/Pagination';import TextField from'@mui/material/TextField';import Header from'../../components/Header';import AnimeCard from'../../components/AnimeCard';import EmptyState from\"../../components/EmptyState\";import AnimeCardLoader from\"../../components/AnimeCard/CardLoader\";import{styContainer}from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LIMIT_PERPAGE=12;var Home=function Home(){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),page=_useState2[0],setPage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),animeList=_useState4[0],setAnimeList=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),lastVisiblePage=_useState6[0],setLastVisiblePage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),keyword=_useState8[0],setKeyword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),errMessage=_useState12[0],setErrMessgae=_useState12[1];var handleChangePage=function handleChangePage(event,value){setPage(value);};var handleChangeKeyWord=function handleChangeKeyWord(e){var val=e.target.value;setKeyword(val);};var fetchAnimeData=useCallback(function(){setLoading(true);fetch(\"https://api.jikan.moe/v4/anime?page=\".concat(page,\"&limit=\").concat(LIMIT_PERPAGE,\"&q=\").concat(keyword)).then(function(response){return response.json();}).then(function(data){if(data!==null&&data!==void 0&&data.data){var _data$pagination;setAnimeList(data===null||data===void 0?void 0:data.data);setLastVisiblePage(data===null||data===void 0?void 0:(_data$pagination=data.pagination)===null||_data$pagination===void 0?void 0:_data$pagination.last_visible_page);}else{setErrMessgae(data.message);}}).catch(function(err){setErrMessgae(err.message);}).finally(function(){setLoading(false);});},[keyword,page]);useEffect(function(){fetchAnimeData();},[fetchAnimeData]);var isAnyAnime=Boolean(animeList===null||animeList===void 0?void 0:animeList.length);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:styContainer,children:[/*#__PURE__*/_jsx(TextField,{className:\"sty-input\",value:keyword,onChange:function onChange(e){return handleChangeKeyWord(e);},placeholder:\"Search Anime\",variant:\"outlined\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"sty-anime-loader-container\",children:[1,2,3,4,5,6].map(function(index){return/*#__PURE__*/_jsx(AnimeCardLoader,{},index);})}):/*#__PURE__*/_jsx(_Fragment,{children:errMessage?/*#__PURE__*/_jsx(EmptyState,{title:\"Uh oh, Error Occured\",description:errMessage}):/*#__PURE__*/_jsx(_Fragment,{children:isAnyAnime?/*#__PURE__*/_jsx(\"div\",{className:\"sty-anime-container\",children:animeList.map(function(anime,index){return/*#__PURE__*/_jsx(AnimeCard,{anime:anime},index);})}):/*#__PURE__*/_jsx(EmptyState,{title:\"Anime not found\",description:\"Please use other keyword\"})})}),isAnyAnime&&/*#__PURE__*/_jsx(Pagination,{className:\"sty-pagination\",count:lastVisiblePage,page:page,onChange:handleChangePage})]})]});};export default Home;","map":{"version":3,"names":["useCallback","useEffect","useState","Pagination","TextField","Header","AnimeCard","EmptyState","AnimeCardLoader","styContainer","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LIMIT_PERPAGE","Home","_useState","_useState2","_slicedToArray","page","setPage","_useState3","_useState4","animeList","setAnimeList","_useState5","_useState6","lastVisiblePage","setLastVisiblePage","_useState7","_useState8","keyword","setKeyword","_useState9","_useState10","loading","setLoading","_useState11","_useState12","errMessage","setErrMessgae","handleChangePage","event","value","handleChangeKeyWord","e","val","target","fetchAnimeData","fetch","concat","then","response","json","data","_data$pagination","pagination","last_visible_page","message","catch","err","finally","isAnyAnime","Boolean","length","children","className","onChange","placeholder","variant","map","index","title","description","anime","count"],"sources":["/Users/syeftiarini.sutendi/anime-list-2/src/pages/Home/index.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\n\nimport Pagination from '@mui/material/Pagination';\nimport TextField from '@mui/material/TextField';\n\nimport Header from '../../components/Header';\nimport AnimeCard from '../../components/AnimeCard';\nimport EmptyState from \"../../components/EmptyState\";\nimport AnimeCardLoader from \"../../components/AnimeCard/CardLoader\";\nimport { styContainer } from './styles';\n\nconst  LIMIT_PERPAGE = 12;\n\nconst Home = () => {\n  const [page, setPage] = useState(1);\n  const [animeList, setAnimeList] = useState([])\n  const [lastVisiblePage, setLastVisiblePage] = useState(0);\n  const [keyword, setKeyword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [errMessage, setErrMessgae] = useState('')\n\n  const handleChangePage = (event: React.ChangeEvent<unknown>, value: number) => {\n    setPage(value);\n  };\n\n  const handleChangeKeyWord = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n    const val = e.target.value;\n    setKeyword(val);\n  };\n\n  const fetchAnimeData = useCallback(() => {\n    setLoading(true)\n    fetch(`https://api.jikan.moe/v4/anime?page=${page}&limit=${LIMIT_PERPAGE}&q=${keyword}`)\n    .then((response) => response.json())\n    .then((data) => {\n      if(data?.data){\n        setAnimeList(data?.data);\n        setLastVisiblePage(data?.pagination?.last_visible_page)\n      } else {\n        setErrMessgae(data.message)\n      }\n    })\n    .catch((err) => {\n      setErrMessgae(err.message)\n    })\n    .finally(() => {\n      setLoading(false)\n    });\n  }, [keyword, page])\n\n  useEffect(() => {\n    fetchAnimeData();\n  }, [fetchAnimeData]);\n\n  const isAnyAnime = Boolean(animeList?.length)\n\n  return(\n    <>\n      <Header />\n      <div className={styContainer}>\n        <TextField className=\"sty-input\" value={keyword} onChange={(e) =>handleChangeKeyWord(e)} placeholder=\"Search Anime\" variant=\"outlined\" />\n        { loading ? \n          <div className=\"sty-anime-loader-container\">\n            {[1,2,3,4,5,6].map((index) => (\n              <AnimeCardLoader key={index} />\n            ))}\n          </div>\n          :\n          <>\n            { errMessage ?\n              <EmptyState title=\"Uh oh, Error Occured\" description={errMessage} />\n            :\n              <>\n                { isAnyAnime ? \n                  <div className=\"sty-anime-container\">\n                    {animeList.map((anime, index) => (\n                      <AnimeCard key={index} anime={anime} />\n                    ))}\n                  </div>\n                : \n                  <EmptyState title=\"Anime not found\" description=\"Please use other keyword\" />\n                }\n              </>\n            }\n          </>\n        }\n        {isAnyAnime && <Pagination className=\"sty-pagination\" count={lastVisiblePage} page={page} onChange={handleChangePage} />}\n      </div>\n    </>\n  )\n\n}\n\nexport default Home;"],"mappings":"6HAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAExD,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CACjD,MAAO,CAAAC,SAAS,KAAM,yBAAyB,CAE/C,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAC5C,MAAO,CAAAC,SAAS,KAAM,4BAA4B,CAClD,MAAO,CAAAC,UAAU,KAAM,6BAA6B,CACpD,MAAO,CAAAC,eAAe,KAAM,uCAAuC,CACnE,OAASC,YAAY,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAExC,GAAO,CAAAC,aAAa,CAAG,EAAE,CAEzB,GAAM,CAAAC,IAAI,CAAG,QAAP,CAAAA,IAAIA,CAAA,CAAS,CACjB,IAAAC,SAAA,CAAwBhB,QAAQ,CAAC,CAAC,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,IAAAI,UAAA,CAAkCrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAvCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,IAAAG,UAAA,CAA8CzB,QAAQ,CAAC,CAAC,CAAC,CAAA0B,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAlDE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAC1C,IAAAG,UAAA,CAA8B7B,QAAQ,CAAC,EAAE,CAAC,CAAA8B,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAA8BjC,QAAQ,CAAC,KAAK,CAAC,CAAAkC,WAAA,CAAAhB,cAAA,CAAAe,UAAA,IAAtCE,OAAO,CAAAD,WAAA,IAAEE,UAAU,CAAAF,WAAA,IAC1B,IAAAG,WAAA,CAAoCrC,QAAQ,CAAC,EAAE,CAAC,CAAAsC,WAAA,CAAApB,cAAA,CAAAmB,WAAA,IAAzCE,UAAU,CAAAD,WAAA,IAAEE,aAAa,CAAAF,WAAA,IAEhC,GAAM,CAAAG,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIC,KAAiC,CAAEC,KAAa,CAAK,CAC7EvB,OAAO,CAACuB,KAAK,CAAC,CAChB,CAAC,CAED,GAAM,CAAAC,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAIC,CAA4D,CAAK,CAC5F,GAAM,CAAAC,GAAG,CAAGD,CAAC,CAACE,MAAM,CAACJ,KAAK,CAC1BX,UAAU,CAACc,GAAG,CAAC,CACjB,CAAC,CAED,GAAM,CAAAE,cAAc,CAAGlD,WAAW,CAAC,UAAM,CACvCsC,UAAU,CAAC,IAAI,CAAC,CAChBa,KAAK,wCAAAC,MAAA,CAAwC/B,IAAI,YAAA+B,MAAA,CAAUpC,aAAa,QAAAoC,MAAA,CAAMnB,OAAO,CAAE,CAAC,CACvFoB,IAAI,CAAC,SAACC,QAAQ,QAAK,CAAAA,QAAQ,CAACC,IAAI,CAAC,CAAC,GAAC,CACnCF,IAAI,CAAC,SAACG,IAAI,CAAK,CACd,GAAGA,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEA,IAAI,CAAC,KAAAC,gBAAA,CACZ/B,YAAY,CAAC8B,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEA,IAAI,CAAC,CACxB1B,kBAAkB,CAAC0B,IAAI,SAAJA,IAAI,kBAAAC,gBAAA,CAAJD,IAAI,CAAEE,UAAU,UAAAD,gBAAA,iBAAhBA,gBAAA,CAAkBE,iBAAiB,CAAC,CACzD,CAAC,IAAM,CACLjB,aAAa,CAACc,IAAI,CAACI,OAAO,CAAC,CAC7B,CACF,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,GAAG,CAAK,CACdpB,aAAa,CAACoB,GAAG,CAACF,OAAO,CAAC,CAC5B,CAAC,CAAC,CACDG,OAAO,CAAC,UAAM,CACbzB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACJ,CAAC,CAAE,CAACL,OAAO,CAAEZ,IAAI,CAAC,CAAC,CAEnBpB,SAAS,CAAC,UAAM,CACdiD,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,CAACA,cAAc,CAAC,CAAC,CAEpB,GAAM,CAAAc,UAAU,CAAGC,OAAO,CAACxC,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEyC,MAAM,CAAC,CAE7C,mBACEnD,KAAA,CAAAF,SAAA,EAAAsD,QAAA,eACExD,IAAA,CAACN,MAAM,GAAE,CAAC,cACVU,KAAA,QAAKqD,SAAS,CAAE3D,YAAa,CAAA0D,QAAA,eAC3BxD,IAAA,CAACP,SAAS,EAACgE,SAAS,CAAC,WAAW,CAACvB,KAAK,CAAEZ,OAAQ,CAACoC,QAAQ,CAAE,SAAAA,SAACtB,CAAC,QAAI,CAAAD,mBAAmB,CAACC,CAAC,CAAC,EAAC,CAACuB,WAAW,CAAC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAE,CAAC,CACvIlC,OAAO,cACP1B,IAAA,QAAKyD,SAAS,CAAC,4BAA4B,CAAAD,QAAA,CACxC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACK,GAAG,CAAC,SAACC,KAAK,qBACvB9D,IAAA,CAACH,eAAe,IAAMiE,KAAQ,CAAC,EAChC,CAAC,CACC,CAAC,cAEN9D,IAAA,CAAAE,SAAA,EAAAsD,QAAA,CACI1B,UAAU,cACV9B,IAAA,CAACJ,UAAU,EAACmE,KAAK,CAAC,sBAAsB,CAACC,WAAW,CAAElC,UAAW,CAAE,CAAC,cAEpE9B,IAAA,CAAAE,SAAA,EAAAsD,QAAA,CACIH,UAAU,cACVrD,IAAA,QAAKyD,SAAS,CAAC,qBAAqB,CAAAD,QAAA,CACjC1C,SAAS,CAAC+C,GAAG,CAAC,SAACI,KAAK,CAAEH,KAAK,qBAC1B9D,IAAA,CAACL,SAAS,EAAasE,KAAK,CAAEA,KAAM,EAApBH,KAAsB,CAAC,EACxC,CAAC,CACC,CAAC,cAEN9D,IAAA,CAACJ,UAAU,EAACmE,KAAK,CAAC,iBAAiB,CAACC,WAAW,CAAC,0BAA0B,CAAE,CAAC,CAE/E,CAAC,CAEL,CAAC,CAEJX,UAAU,eAAIrD,IAAA,CAACR,UAAU,EAACiE,SAAS,CAAC,gBAAgB,CAACS,KAAK,CAAEhD,eAAgB,CAACR,IAAI,CAAEA,IAAK,CAACgD,QAAQ,CAAE1B,gBAAiB,CAAE,CAAC,EACrH,CAAC,EACN,CAAC,CAGP,CAAC,CAED,cAAe,CAAA1B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}