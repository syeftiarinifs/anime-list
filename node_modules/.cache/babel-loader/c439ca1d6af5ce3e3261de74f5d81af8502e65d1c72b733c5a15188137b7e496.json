{"ast":null,"code":"import _slicedToArray from\"/Users/syeftiarini.sutendi/anime-list-2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useMemo,useEffect,useState}from'react';import{useParams}from'react-router-dom';import Typography from'@mui/material/Typography';import Chip from'@mui/material/Chip';import Button from'@mui/material/Button';import{ANIME_LIST_STORAGE_KEY}from'../../constants';import{saveData,getData}from'../../helpers/LocalStorage';import Header from'../../components/Header';import{styContainer}from'./styles';import{DEFAULT_VALUE_ANIME}from'./constants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Detail=function Detail(){var _animeDetail$images,_animeDetail$images$j,_animeDetail$genres;var _useState=useState(DEFAULT_VALUE_ANIME),_useState2=_slicedToArray(_useState,2),animeDetail=_useState2[0],setAnimeDetail=_useState2[1];var currFavorit=useMemo(function(){return getData(ANIME_LIST_STORAGE_KEY)||[];},[]);var _useParams=useParams(),id=_useParams.id;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFavorit=_useState4[0],setIsFavorit=_useState4[1];var handleAddFavorite=function handleAddFavorite(){currFavorit.push(animeDetail);var serializedState=JSON.stringify(currFavorit);saveData(serializedState,ANIME_LIST_STORAGE_KEY);window.location.reload();};var handleRemoveFavorite=function handleRemoveFavorite(){var itemNotRemoved=currFavorit.filter(function(item){return item.mal_id!==Number(id);});var serializedState=JSON.stringify(itemNotRemoved);saveData(serializedState,ANIME_LIST_STORAGE_KEY);setIsFavorit(true);window.location.reload();};useEffect(function(){fetch(\"https://api.jikan.moe/v4/anime/\".concat(id,\"/full\")).then(function(response){return response.json();}).then(function(data){setAnimeDetail(data.data);}).catch(function(err){console.error(err.message);});},[id]);useEffect(function(){var tempFavorite=Boolean(currFavorit===null||currFavorit===void 0?void 0:currFavorit.find(function(item){return item.mal_id===Number(id);}));setIsFavorit(tempFavorite);},[currFavorit,id]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:styContainer,children:[/*#__PURE__*/_jsx(\"div\",{className:\"sty-image\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"anime\",src:animeDetail===null||animeDetail===void 0?void 0:(_animeDetail$images=animeDetail.images)===null||_animeDetail$images===void 0?void 0:(_animeDetail$images$j=_animeDetail$images.jpg)===null||_animeDetail$images$j===void 0?void 0:_animeDetail$images$j.large_image_url})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sty-title-wrapper\",children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h5\",component:\"div\",children:animeDetail===null||animeDetail===void 0?void 0:animeDetail.title}),isFavorit?/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleRemoveFavorite,children:\"Remove from Favorites\"}):/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleAddFavorite,children:\"Add to Favorites\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sty-chip-wrapper\",children:animeDetail===null||animeDetail===void 0?void 0:(_animeDetail$genres=animeDetail.genres)===null||_animeDetail$genres===void 0?void 0:_animeDetail$genres.map(function(genre,index){return/*#__PURE__*/_jsx(Chip,{label:genre.name,variant:\"outlined\"},index);})}),/*#__PURE__*/_jsx(Typography,{className:\"sty-anime-description\",variant:\"body2\",color:\"text.secondary\",children:animeDetail===null||animeDetail===void 0?void 0:animeDetail.synopsis})]})]});};export default Detail;","map":{"version":3,"names":["useMemo","useEffect","useState","useParams","Typography","Chip","Button","ANIME_LIST_STORAGE_KEY","saveData","getData","Header","styContainer","DEFAULT_VALUE_ANIME","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Detail","_animeDetail$images","_animeDetail$images$j","_animeDetail$genres","_useState","_useState2","_slicedToArray","animeDetail","setAnimeDetail","currFavorit","_useParams","id","_useState3","_useState4","isFavorit","setIsFavorit","handleAddFavorite","push","serializedState","JSON","stringify","window","location","reload","handleRemoveFavorite","itemNotRemoved","filter","item","mal_id","Number","fetch","concat","then","response","json","data","catch","err","console","error","message","tempFavorite","Boolean","find","children","className","alt","src","images","jpg","large_image_url","gutterBottom","variant","component","title","onClick","genres","map","genre","index","label","name","color","synopsis"],"sources":["/Users/syeftiarini.sutendi/anime-list-2/src/pages/Detail/index.tsx"],"sourcesContent":["import { useMemo, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport Typography from '@mui/material/Typography';\nimport Chip from '@mui/material/Chip';\nimport Button from '@mui/material/Button';\n\nimport { ANIME_LIST_STORAGE_KEY } from '../../constants';\nimport { saveData, getData } from '../../helpers/LocalStorage';\nimport Header from '../../components/Header';\nimport { styContainer } from './styles';\nimport { AnimeDetailProps } from './types';\nimport { DEFAULT_VALUE_ANIME } from './constants'\n\ninterface AnimeProps {\n  mal_id: number;\n}\n\nconst Detail = () => {\n  const [animeDetail, setAnimeDetail] = useState<AnimeDetailProps>(DEFAULT_VALUE_ANIME);\n\n  const currFavorit = useMemo(() => {\n    return getData(ANIME_LIST_STORAGE_KEY) || [];\n  }, [])\n\n  const { id } = useParams();\n\n  const [isFavorit, setIsFavorit] = useState(false)\n\n  const handleAddFavorite = () => {\n    currFavorit.push(animeDetail);\n    const serializedState = JSON.stringify(currFavorit);\n    saveData(serializedState, ANIME_LIST_STORAGE_KEY);\n    window.location.reload();\n  }\n\n  const handleRemoveFavorite = () => {\n    const itemNotRemoved = currFavorit.filter((item: AnimeProps) => item.mal_id !== Number(id))\n    const serializedState = JSON.stringify(itemNotRemoved);\n    saveData(serializedState, ANIME_LIST_STORAGE_KEY);\n    setIsFavorit(true);\n    window.location.reload();\n  }\n\n  useEffect(() => {\n    fetch(`https://api.jikan.moe/v4/anime/${id}/full`)\n      .then((response) => response.json())\n      .then((data) => {\n        setAnimeDetail(data.data);\n      })\n      .catch((err) => {\n        console.error(err.message);\n      });\n  }, [id]);\n\n  useEffect(() => {\n    const tempFavorite = Boolean(currFavorit?.find((item: AnimeProps) => item.mal_id === Number(id)))\n    setIsFavorit(tempFavorite)\n  }, [currFavorit, id])\n\n  return(\n    <>\n      <Header />\n      <div className={styContainer}>\n        <div className=\"sty-image\">\n          <img alt=\"anime\" src={animeDetail?.images?.jpg?.large_image_url} />\n        </div>\n\n        <div className='sty-title-wrapper'>\n          <Typography gutterBottom variant=\"h5\" component=\"div\">\n            {animeDetail?.title}\n          </Typography>\n          { isFavorit ? \n              <Button variant=\"contained\" onClick={handleRemoveFavorite}>Remove from Favorites</Button>\n            :\n              <Button variant=\"contained\" onClick={handleAddFavorite}>Add to Favorites</Button>\n          }\n          \n        </div>\n\n        <div className='sty-chip-wrapper'>\n          {animeDetail?.genres?.map((genre, index) => (\n            <Chip key={index} label={genre.name} variant=\"outlined\" />\n          ))}\n        </div>\n        \n        <Typography className='sty-anime-description' variant=\"body2\" color=\"text.secondary\">\n            {animeDetail?.synopsis}\n          </Typography>\n\n      </div>\n    </>\n  )\n\n}\n\nexport default Detail;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}